<UserControl
	x:Class                ="LinqToDB.LINQPad.UI.DynamicConnectionTab"
	x:ClassModifier        ="internal"
	xmlns                  = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x                = "http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d                = "http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc               = "http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:us               = "clr-namespace:LinqToDB.LINQPad.UI"
	xmlns:main             = "clr-namespace:LinqToDB.LINQPad"
	mc:Ignorable           = "d"
	d:DataContext          = "{d:DesignInstance us:DynamicConnectionModel, IsDesignTimeCreatable=true}"
	>

	<StackPanel Margin="10 0 0 0">
		<TextBlock Margin="0 10 0 10">
			Configure automatically generated data model connection
		</TextBlock>

		<us:SharedConnectionOptions HorizontalAlignment="Left" />

		<StackPanel>
			<StackPanel ToolTip="Select database">
				<Label>Database</Label>
				<ComboBox ItemsSource="{Binding Databases}" SelectedValue="{Binding Database}">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding (main:IDatabaseProvider.Description)}" />
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
			</StackPanel>

			<StackPanel ToolTip="Select SQL dialect version or database provider" Visibility="{Binding ProviderVisibility}">
				<Label>Dialect or provider</Label>
				<ComboBox ItemsSource="{Binding Providers}" SelectedValue="{Binding Provider}" DisplayMemberPath="DisplayName" />
			</StackPanel>

			<TextBlock Visibility="{Binding ProviderDownloadUrlVisibility}">You can download provider <Hyperlink NavigateUri="{Binding ProviderDownloadUrl}" RequestNavigate="Url_Click">here</Hyperlink>.</TextBlock>

			<StackPanel ToolTip="Specify path to ADO.NET provider location" Visibility="{Binding ProviderPathVisibility}">
				<Label Content="{Binding ProviderPathLabel}" />
				<DockPanel Margin="0 15 0 0">
					<Button DockPanel.Dock="Right" Padding="10 5 10 5" Content="Select" Click="Click_SelectProvider" />
					<TextBox Text="{Binding ProviderPath}" />
				</DockPanel>
			</StackPanel>

			<StackPanel ToolTip="Specify database connection string">
				<Label>Connection String</Label>
				<TextBox Text="{Binding ConnectionString}" TextWrapping="Wrap" Height="60" VerticalScrollBarVisibility="Auto" />
			</StackPanel>

			<StackPanel
				Visibility="{Binding SecondaryConnectionStringVisibility}"
				ToolTip="Specify secondary connection string for MS Access to improve generated schema. This connection string is used for database schema fetching only and must be ODBC connection string when primary connection string use OLE DB and vice versa.">
				<Label>Additional Connection String</Label>
				<TextBox Text="{Binding SecondaryConnectionString}" TextWrapping="Wrap" Height="60" VerticalScrollBarVisibility="Auto" />
			</StackPanel>

			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition/>
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>

				<CheckBox
					Grid.Column="0"
					ToolTip="Store connection strings in LINQPad in encrypted form"
					Content="Encrypt Connection Strings" FontSize="12" IsChecked="{Binding EncryptConnectionString}" Margin="0,5,0,0" />

				<StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center"
					ToolTip="Database command timeout in seconds. Use empty for default provider timeout.">
					<StackPanel.Resources>
						<us:CommandTimeoutConverter x:Key="Converter" />
					</StackPanel.Resources>
					<TextBox Text="{Binding CommandTimeout, Converter={StaticResource Converter}}" Width="50" Height="20" FontSize="12" />
					<Label FontSize="12" Height="20" Padding="5,2" Content="Command Timeout (in seconds)"/>
				</StackPanel>
			</Grid>
		</StackPanel>
	</StackPanel>

</UserControl>
